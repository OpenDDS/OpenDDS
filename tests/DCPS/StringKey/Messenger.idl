
module Messenger {

  enum MyEnum {b, s, d, other1, other2};

  union MyUnion switch (MyEnum) {
    case b: boolean u_b;
    case s: short u_s;
    case d: double u_d;
    default: float u_f;
  };

  typedef MyEnum Enums[3];
  typedef MyEnum AnEnum;
  typedef sequence<AnEnum> EnumSeq;

  @topic
  struct Message {
    string from;
    string subject;
    @key
    string subject_id;
    string text;
    long   count;
    Enums e;
    MyUnion u;
    EnumSeq seq;
  };
};
